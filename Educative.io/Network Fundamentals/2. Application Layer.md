# Application Layer

## Responsibilities -
- Writing data off to the network
- Reading data from the end-user
- Providing userful application to the end user
- Error handling and recovery
- Eqivalent - Carrying the package to the post office.
- Resides on end-systems.

## Application Layer Protocols
- User apps are the purpose of the internet
- Started with emails
- Instant messaging, Voice over IP, Video Chat, Video Streaming
- Running on Application Layer Protocols

## Network Application Architecture
- How are applications structured across end systems?

### Client-Server Architecture
- App split into 2 - Client-side software, and server-side software (called processes)
- Communicate with each other via messages
1. Server - 
    - Controls access to a centralised resource or service (Website)
    - 2 important characteristics -
        - Attempt made to keep servers online all the time
        - Have atleast one reliable IP by which they can be reached
    - Equivalent - 24/7 Pizza Delivery Place
    - Scaled up - Several machines host server processes, and reside in **data centers** (buildings that house servers)
2. Client - 
    - Use the internet to consume content and use services
    - Initiate connection to the servers

### P2P Architecture
- No dedicated server is involved - Apps communicate with each other
- Each peer can be categorised as servers or clients - Every machine is capable of being a client as well as a server
- Eg. Bittorrent - Based on P2P. User accesses bits of the file on several other users’ computers and puts them together on its end. No traditional ‘server’ is involved in this scenario.
- Filesharing is not the only application of P2P!

### Hybrid
- Involving server involvement to some extent
- Combination of the two architectures.

## P2P vs Client-Server
- Server can upload at rate $up_s$ (upload speed in bits/second)
- $N$ clients want to download the same file from the server.
- Client $i$ can upload/download at rate $up_i/dwn_i$ bits/second
- Size of the file - $S$

Client: Can download/upload the file at a certain rate
Server: Can upload the file at a certain rate to the client.

### Client-Server
- Server can upload to $N$ clients in time $NS/up_s$
- Client will take at least $S/dwn_{min}$ time to download the file, where $dwn_{min} = min(dwn_i)$
$$max\{{\frac{NS}{up_s}, \frac{S}{dwn_{min}}}\}$$

### P2P
- Server can upload to 1 clients in time $S/up_s$
- 1 client will take at least $S/dwn_{min}$ time to download the file, where $dwn_{min} = min(dwn_i)$
- To upload across N clients, it will take $NS/{up_{sum}}$ where  $up_{sum} = \sum{up_i}$
$$max\{{\frac{S}{up_s}, \frac{S}{dwn_{min}}}, \frac{NS}{up_{sum}}\}$$
- P2P is incredibly scalable! Self-scaling

![Alt text](media\scalability_p2p_client.png)

## How Processes Communicate

